<!doctype html>
<html lang="en">
  <head>
    <title>Starcraft Stats</title>
    <link rel="stylesheet" href="https://assets.ubuntu.com/v1/vanilla-framework-version-4.24.0.min.css" />
    <link rel="stylesheet" href="css/custom.css" />
    <script type="module" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.js"></script>
    <script type="module" src="js/issues.js"></script>
    <script type="module" src="js/snapshot.js"></script>
  </head>

  <header id="navigation" class="p-navigation is-dark">
    <div class="p-navigation__row--25-75">
      <div class="p-navigation__banner">
        <div class="p-navigation__tagged-logo">
          <a class="p-navigation__link" href="#">
            <div class="p-navigation__logo-tag">
              <img class="p-navigation__logo-icon" src="assets/favicon-greyscale.ico" alt="" />
            </div>
            <span class="p-navigation__logo-title">Starcraft Stats</span>
          </a>
        </div>
        <ul class="p-navigation__items">
          <li class="p-navigation__item">
            <button class="js-menu-button p-navigation__link">Menu</button>
          </li>
        </ul>
      </div>
      <nav class="p-navigation__nav" aria-label="Example main">
        <ul class="p-navigation__items">
          <li class="p-navigation__item">
            <a class="p-navigation__link" href="index.html">Libraries and Applications</a>
          </li>
          <li class="p-navigation__item">
            <a class="p-navigation__link" href="commits.html">Releases and commits</a>
          </li>
          <li class="p-navigation__item is-selected">
            <a class="p-navigation__link" href="#">Issues</a>
          </li>
        </ul>
      </nav>
    </div>
  </header>

  <body class="is-paper">
    <div class="p-strip">
      <div class="row">
        <div class="col-12">
          <h2>Issues</h2>
        </div>
      </div>
    </div>

    <div class="row">
      <hr class="p-rule" />
    </div>

    <div class="p-strip">
      <div class="row">
        <div class="col-12">
          <h2 class="p-heading--3">Open issues</h2>
          <p>4-week rolling average of open issues over time.</p>
        </div>
      </div>
      <div class="row">
        <div class="col-3">
          <h3 class="p-heading--4">Projects</h3>
          <div id="project-checkboxes"></div>
        </div>
        <div class="col-9">
          <canvas id="issues-chart" style="width: 100%; height: 500px;"></canvas>
        </div>
      </div>
    </div>

    <div class="row">
      <hr class="p-rule" />
    </div>

    <div class="p-strip">
      <div class="row">
        <div class="col-12">
          <h2 class="p-heading--3">Median issue age</h2>
          <p>4-week rolling average of median open issue age in days. Rising age indicates the backlog is getting staler.</p>
        </div>
      </div>
      <div class="row">
        <div class="col-3">
          <h3 class="p-heading--4">Projects</h3>
          <div id="age-checkboxes"></div>
        </div>
        <div class="col-9">
          <canvas id="age-chart" style="width: 100%; height: 500px;"></canvas>
        </div>
      </div>
    </div>

    <div class="row">
      <hr class="p-rule" />
    </div>

    <div class="p-strip">
      <div class="row">
        <div class="col-12">
          <h2 class="p-heading--3">Issues closed per week</h2>
          <p>4-week rolling average of issues closed per week. Shows throughput over time.</p>
        </div>
      </div>
      <div class="row">
        <div class="col-3">
          <h3 class="p-heading--4">Projects</h3>
          <div id="closed-checkboxes"></div>
        </div>
        <div class="col-9">
          <canvas id="closed-chart" style="width: 100%; height: 500px;"></canvas>
        </div>
      </div>
    </div>

    <div class="row">
      <hr class="p-rule" />
    </div>

    <div class="p-strip">
      <div class="row">
        <div class="col-12">
          <h2 class="p-heading--3">Project snapshot</h2>
          <p>Current state of each project: open issues and PRs, median age, and throughput over the last year.</p>
        </div>
      </div>
      <div class="row">
        <div class="col-12">
          <h4 class="p-heading--5">Open issues and PRs</h4>
          <canvas id="snapshot-open-chart" style="width: 100%;"></canvas>
        </div>
      </div>
      <div class="row u-sv3">
        <div class="col-12">
          <h4 class="p-heading--5">Median age (days)</h4>
          <canvas id="snapshot-age-chart" style="width: 100%;"></canvas>
        </div>
      </div>
      <div class="row">
        <div class="col-12">
          <h4 class="p-heading--5">Closed in the last year</h4>
          <canvas id="snapshot-closed-chart" style="width: 100%;"></canvas>
        </div>
      </div>
    </div>

    <footer class="l-footer--sticky p-strip is-dark is-shallow">
      <div class="row">
        <a class="is-dark" href="https://github.com/mr-cal/starcraft-stats">Generated by starcraft-stats</a>
      </div>
    </footer>
  </body>
</html>
